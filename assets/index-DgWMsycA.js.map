{"version":3,"file":"index-DgWMsycA.js","sources":["../../src/main.js"],"sourcesContent":["// Personal Finance Dashboard - Israeli Edition\n// Main application entry point\n\nconsole.log('🏦 Israeli Finance Dashboard - Starting up...');\n\n// Initialize app when DOM is loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n    initializeApp();\n});\n\nasync function initializeApp() {\n    // Load component library\n    await loadComponentLibrary();\n    \n    // Hide loading screen and show app\n    setTimeout(() => {\n        const loading = document.getElementById('loading');\n        const app = document.getElementById('app');\n        \n        if (loading) loading.style.display = 'none';\n        if (app) app.style.display = 'block';\n        \n        console.log('✅ App initialized successfully');\n    }, 1000);\n    \n    // Set up event listeners\n    setupEventListeners();\n    \n    // Initialize Hebrew number formatting\n    initializeHebrewFormatting();\n    \n    // Check for saved data\n    checkStoredData();\n    \n    // Initialize UI components\n    initializeUIComponents();\n    \n    // Initialize theme system\n    initializeThemeSystem();\n}\n\nasync function loadComponentLibrary() {\n    // Files with ES6 exports that need dynamic import\n    const es6ModuleFiles = [\n        './src/utils/israeli-salary-calculator.js',\n        './src/utils/hebrew-financial-terms.js', \n        './src/utils/israeli-financial-tips.js',\n        './src/components/ThemeToggle.js',\n        './src/components/TransactionForm.js',\n        './src/components/CategoryManager.js',\n        './src/components/index.js',\n        './src/data/index.js'\n    ];\n\n    // Files with conditional exports that can use script tags\n    const componentFiles = [\n        './src/utils/israeli-formatting.js',\n        './src/components/Button.js',\n        './src/components/Input.js', \n        './src/components/Navigation.js',\n        './src/components/Modal.js',\n        './src/components/Toast.js',\n        './src/components/Dashboard.js',\n        './src/components/TransactionList.js',\n        './src/components/Charts.js'\n    ];\n\n    try {\n        // Load ES6 modules using dynamic imports first\n        for (const file of es6ModuleFiles) {\n            try {\n                const module = await import(/* @vite-ignore */ file);\n                console.log(`📦 ES6 Module loaded: ${file}`);\n                \n                // Make key exports available globally\n                if (module.DataAPI) {\n                    window.DataAPI = module.DataAPI;\n                    console.log('💾 DataAPI available globally');\n                }\n                if (module.DataManager) {\n                    window.DataManager = module.DataManager;\n                    console.log('💾 DataManager available globally');\n                }\n                if (module.IsraeliSalaryCalculator) {\n                    window.IsraeliSalaryCalculator = module.IsraeliSalaryCalculator;\n                }\n                if (module.HEBREW_FINANCIAL_TERMS) {\n                    window.HEBREW_FINANCIAL_TERMS = module.HEBREW_FINANCIAL_TERMS;\n                }\n                if (module.ISRAELI_FINANCIAL_TIPS) {\n                    window.ISRAELI_FINANCIAL_TIPS = module.ISRAELI_FINANCIAL_TIPS;\n                }\n                if (module.ThemeToggle) {\n                    window.ThemeToggle = module.ThemeToggle;\n                }\n                if (module.TransactionForm) {\n                    window.TransactionForm = module.TransactionForm;\n                }\n                if (module.CategoryManager) {\n                    window.CategoryManager = module.CategoryManager;\n                }\n                if (module.ComponentUtils) {\n                    window.ComponentUtils = module.ComponentUtils;\n                }\n            } catch (moduleError) {\n                console.error(`❌ Error loading ES6 module ${file}:`, moduleError);\n                // Show user-friendly error for critical components\n                if (file.includes('TransactionForm') || file.includes('DataAPI')) {\n                    console.warn(`⚠️ Critical component ${file} failed to load - some features may be unavailable`);\n                }\n                // Continue with other modules even if one fails\n            }\n        }\n        \n        // Load regular component files using script tags\n        for (const file of componentFiles) {\n            await loadScript(file);\n        }\n        \n        console.log('📦 Hebrew UI Components loaded successfully');\n        console.log('💾 Data Management System loaded successfully');\n        \n        // Check if critical components are available\n        const criticalComponents = ['Button', 'Toast', 'Modal', 'DataAPI'];\n        const missingComponents = criticalComponents.filter(comp => !window[comp]);\n        \n        if (missingComponents.length > 0) {\n            console.warn('⚠️ Some critical components are missing:', missingComponents);\n            // Still allow the app to continue, but with warnings\n        }\n        \n    } catch (error) {\n        console.error('❌ Error loading components:', error);\n        \n        // Try to show error via basic alert if HebrewToasts is not available\n        if (typeof HebrewToasts !== 'undefined') {\n            HebrewToasts.error('שגיאה בטעינת רכיבי ממשק המשתמש');\n        } else {\n            // Fallback to alert if toast system failed to load\n            console.error('Toast system not available - using basic alert');\n            alert('שגיאה בטעינת רכיבי ממשק המשתמש - חלק מהפונקציות עלולות להיות לא זמינות');\n        }\n    }\n}\n\nfunction loadScript(src) {\n    return new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.src = src;\n        script.onload = () => {\n            console.log(`📦 Script loaded: ${src}`);\n            resolve();\n        };\n        script.onerror = (error) => {\n            console.error(`❌ Failed to load script: ${src}`, error);\n            \n            // Show user-friendly error for critical components\n            if (src.includes('Button') || src.includes('Toast') || src.includes('Modal')) {\n                console.warn(`⚠️ Critical UI component ${src} failed to load - some UI features may be unavailable`);\n            }\n            \n            // Don't reject to allow other scripts to continue loading\n            resolve(); // Resolve instead of reject to prevent stopping the entire loading process\n        };\n        document.head.appendChild(script);\n    });\n}\n\nfunction setupEventListeners() {\n    // Start app button\n    window.startApp = function() {\n        console.log('🚀 Starting main application...');\n        \n        // Show demo of our component library\n        if (window.ComponentUtils) {\n            showComponentDemo();\n        } else {\n            // Fallback for when components aren't loaded yet\n            HebrewToasts?.info('מערכת הרכיבים עדיין נטענת...') || \n            alert('ברוכים הבאים! המערכת תהיה זמינה בקרוב.');\n        }\n    };\n    \n    // Navigation clicks\n    document.querySelectorAll('.nav a').forEach(link => {\n        link.addEventListener('click', (e) => {\n            e.preventDefault();\n            const section = e.target.getAttribute('href').substring(1);\n            console.log(`Navigating to: ${section}`);\n            \n            // Show appropriate section\n            if (window.HebrewToasts) {\n                HebrewToasts.info(`ניווט אל: ${getSectionName(section)}`);\n            }\n        });\n    });\n}\n\nfunction getSectionName(section) {\n    const sectionNames = {\n        'dashboard': 'לוח בקרה',\n        'transactions': 'עסקאות', \n        'budget': 'תקציב',\n        'reports': 'דוחות',\n        'settings': 'הגדרות'\n    };\n    return sectionNames[section] || section;\n}\n\nfunction showComponentDemo() {\n    // Create and show component demo\n    const demo = ComponentUtils.createDemo();\n    \n    // Replace main content with demo\n    const mainContent = document.querySelector('.main');\n    if (mainContent) {\n        // Store original content\n        const originalContent = mainContent.innerHTML;\n        \n        // Add back button\n        const backButton = new Button({ type: 'secondary', icon: '←' })\n            .render('חזור לדף הבית', () => {\n                mainContent.innerHTML = originalContent;\n                // Re-attach event listeners\n                setupEventListeners();\n                HebrewToasts.info('חזרת לדף הבית');\n            });\n        \n        demo.insertBefore(backButton, demo.firstChild);\n        \n        // Replace content\n        mainContent.innerHTML = '';\n        mainContent.appendChild(demo);\n        \n        // Show success message\n        HebrewToasts.success('ברוכים הבאים למערכת הרכיבים החדשה!', 'מערכת רכיבים');\n    }\n}\n\nfunction initializeUIComponents() {\n    // Initialize global UI components after everything is loaded\n    if (typeof HebrewNavigation !== 'undefined') {\n        console.log('🎨 UI Components ready');\n        \n        // Add component demo button to header if in development\n        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\n            addDemoButton();\n        }\n        \n        // Initialize tooltips, keyboard shortcuts, etc.\n        initializeKeyboardShortcuts();\n        \n        // Show welcome toast\n        setTimeout(() => {\n            if (window.HebrewToasts) {\n                HebrewToasts.info('מערכת הרכיבים הישראלית מוכנה לשימוש!', 'מוכן');\n            }\n        }, 2000);\n    }\n}\n\nfunction addDemoButton() {\n    // Add a demo button to the header for development\n    const headerActions = document.querySelector('.header-content');\n    if (headerActions && window.Button) {\n        const demoBtn = new Button({ \n            type: 'ghost', \n            size: 'small', \n            icon: '🎨' \n        }).render('רכיבים', showComponentDemo);\n        \n        demoBtn.style.marginLeft = 'var(--spacing-md)';\n        headerActions.appendChild(demoBtn);\n    }\n}\n\nfunction initializeKeyboardShortcuts() {\n    // Add useful keyboard shortcuts\n    document.addEventListener('keydown', (e) => {\n        // Ctrl/Cmd + K for quick actions\n        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\n            e.preventDefault();\n            if (window.HebrewModals) {\n                HebrewModals.addTransaction().open();\n            }\n        }\n        \n        // Escape to close any open modals/toasts\n        if (e.key === 'Escape') {\n            if (window.HebrewToasts) {\n                HebrewToasts.clearAll();\n            }\n        }\n        \n        // Alt + N for new transaction\n        if (e.altKey && e.key === 'n') {\n            e.preventDefault();\n            if (window.HebrewToasts) {\n                HebrewToasts.info('קיצור מקלדת: Alt+N להוספת עסקה חדשה');\n            }\n        }\n    });\n}\n\nfunction initializeHebrewFormatting() {\n    // Enhanced Hebrew/Israeli formatting utilities are loaded via israeli-formatting.js\n    console.log('🔤 Enhanced Hebrew formatting initialized');\n    \n    // Test enhanced formatting\n    if (window.israeliFormatter) {\n        console.log('✅ Israeli Formatter loaded successfully');\n        \n        // Test currency formatting\n        console.log('Currency test (basic):', formatCurrency(1234.56));\n        console.log('Currency test (compact):', formatCurrency(1500000, { compact: true }));\n        console.log('Currency test (no symbol):', formatCurrency(999.99, { showSymbol: false }));\n        \n        // Test number formatting\n        console.log('Number test (basic):', formatNumber(1234567));\n        console.log('Number test (compact):', formatNumber(2500000, { compact: true }));\n        \n        // Test date formatting\n        console.log('Date test (medium):', formatDate(new Date()));\n        console.log('Date test (long):', formatDate(new Date(), { style: 'long' }));\n        \n        // Test Israeli-specific formatting\n        console.log('Tax year test:', formatTaxYear());\n        console.log('Phone test:', formatPhoneNumber('0523456789'));\n        console.log('ID test:', formatIsraeliId('123456789'));\n        console.log('Percentage test:', formatPercentage(15.5));\n        \n        // Display current tax year info\n        const taxYear = getTaxYearPeriod();\n        console.log('📅 Current tax year:', taxYear.label);\n        console.log('📅 Tax year period:', formatDate(taxYear.start) + ' - ' + formatDate(taxYear.end));\n        \n        // Test salary calculator\n        if (window.salaryCalculator) {\n            console.log('💰 Testing Israeli Salary Calculator...');\n            const testSalary = calculateMonthlySalary(15000, { children: 2 });\n            console.log('💼 Salary test (₪15,000 gross, 2 children):');\n            console.log('  📊 Net salary:', formatCurrency(testSalary.net));\n            console.log('  🏛️ Total taxes:', formatCurrency(testSalary.totalTaxes));\n            console.log('  📈 Effective rate:', testSalary.effectiveTaxRate.toFixed(1) + '%');\n        }\n        \n        // Test Hebrew financial terms\n        if (window.hebrewTerms) {\n            console.log('🔤 Testing Hebrew Financial Terms...');\n            console.log('💰 Income:', getTerm('income'));\n            console.log('💸 Expense:', getTerm('expense'));\n            console.log('🏦 Bank:', getTerm('bank'));\n            console.log('📊 Budget:', getTerm('budget'));\n            console.log('✅ Success phrase:', getSuccess('saved'));\n        }\n        \n        // Test Israeli financial tips\n        if (window.financialTips) {\n            console.log('💡 Testing Israeli Financial Tips...');\n            const tipOfDay = getTipOfTheDay();\n            console.log('📅 Tip of the day:', tipOfDay.title);\n            console.log('🎯 High priority tips:', getHighPriorityTips().length, 'available');\n            const taxTips = getTipsByCategory('taxes');\n            console.log('🏛️ Tax tips:', taxTips.length, 'available');\n        }\n    } else {\n        console.warn('⚠️ Israeli Formatter not loaded - using basic formatting');\n        \n        // Fallback basic formatting\n        window.formatCurrency = function(amount) {\n            return new Intl.NumberFormat('he-IL', {\n                style: 'currency',\n                currency: 'ILS',\n                currencyDisplay: 'symbol'\n            }).format(amount);\n        };\n        \n        window.formatNumber = function(number) {\n            return new Intl.NumberFormat('he-IL').format(number);\n        };\n        \n        window.formatDate = function(date) {\n            return new Intl.DateTimeFormat('he-IL', {\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric'\n            }).format(date);\n        };\n        \n        // Basic tests\n        console.log('Currency test:', formatCurrency(1234.56));\n        console.log('Number test:', formatNumber(1234567));\n        console.log('Date test:', formatDate(new Date()));\n    }\n}\n\nasync function checkStoredData() {\n    // Check data system status using DataAPI\n    if (window.DataAPI) {\n        try {\n            const status = DataAPI.system.getStatus();\n            const stats = DataAPI.system.getStats();\n            \n            console.log('📊 Data System Status:', status);\n            console.log('📈 Data Stats:', stats);\n            \n            if (stats.transactions > 0 || stats.categories > 0) {\n                console.log(`💰 Found ${stats.transactions} transactions, ${stats.categories} categories`);\n                \n                // Show welcome back message\n                setTimeout(() => {\n                    if (window.HebrewToasts) {\n                        HebrewToasts.info(\n                            `ברוך שובך! יש לך ${stats.transactions} עסקאות ו-${stats.categories} קטגוריות`,\n                            'נתונים קיימים'\n                        );\n                    }\n                }, 3000);\n            } else {\n                console.log('🆕 New user - initializing default data');\n                \n                // Show welcome message for new users\n                setTimeout(() => {\n                    if (window.HebrewToasts) {\n                        HebrewToasts.success(\n                            'ברוכים הבאים! המערכת מוכנה לשימוש עם קטגוריות ישראליות',\n                            'משתמש חדש'\n                        );\n                    }\n                }, 3000);\n            }\n        } catch (error) {\n            console.error('Error checking data:', error);\n        }\n    } else {\n        console.log('⏳ DataAPI not loaded yet - will check data later');\n    }\n}\n\nfunction initializeThemeSystem() {\n    // Initialize theme system with Hebrew support\n    if (typeof ThemeToggle !== 'undefined') {\n        console.log('🎨 Initializing theme system...');\n        \n        // Create theme toggle instance\n        const themeToggle = new ThemeToggle({\n            showLabel: true,\n            position: 'top-right'\n        });\n        \n        // Add to navigation or header\n        const headerActions = document.querySelector('.header-content');\n        if (headerActions) {\n            const toggleContainer = document.createElement('div');\n            toggleContainer.className = 'theme-toggle-container';\n            toggleContainer.style.marginLeft = 'var(--spacing-md)';\n            \n            // Create toggle button HTML\n            toggleContainer.innerHTML = themeToggle.getHTML();\n            headerActions.appendChild(toggleContainer);\n            \n            // Set up click handler\n            const toggleButton = toggleContainer.querySelector('.theme-toggle');\n            if (toggleButton) {\n                toggleButton.addEventListener('click', () => {\n                    themeToggle.toggleTheme();\n                });\n            }\n        } else {\n            // Fallback: add as fixed position toggle\n            document.body.appendChild(themeToggle.render());\n            themeToggle.toggleButton.classList.add('theme-toggle-fixed', 'theme-toggle-top-right');\n        }\n        \n        // Listen for theme changes\n        document.addEventListener('themeChanged', (e) => {\n            console.log('🌓 Theme changed to:', e.detail.theme);\n            \n            // Show theme change notification\n            if (window.HebrewToasts) {\n                const message = e.detail.theme === 'dark' ? 'עברת למצב לילה' : 'עברת למצב יום';\n                HebrewToasts.info(message, 'שינוי נושא');\n            }\n        });\n        \n        // Apply saved theme on startup\n        const savedTheme = localStorage.getItem('theme') || 'light';\n        document.documentElement.setAttribute('data-theme', savedTheme);\n        \n        console.log('✅ Theme system initialized');\n    } else {\n        console.warn('⚠️ ThemeToggle component not loaded');\n    }\n}\n\n// Error handling\nwindow.addEventListener('error', (e) => {\n    console.error('Application error:', e.error);\n    // Error reporting will be implemented in future phases\n});\n\n// Service worker registration (for PWA functionality)\nif ('serviceWorker' in navigator) {\n    window.addEventListener('load', () => {\n        // Use correct path for service worker - works for both local and GitHub Pages\n        navigator.serviceWorker.register('./sw.js')\n            .then(registration => {\n                console.log('SW registered: ', registration);\n            })\n            .catch(registrationError => {\n                console.log('SW registration failed: ', registrationError);\n            });\n    });\n}\n\nconsole.log('🏁 Main.js loaded successfully');"],"names":["initializeApp","loadComponentLibrary","loading","app","setupEventListeners","initializeHebrewFormatting","checkStoredData","initializeUIComponents","initializeThemeSystem","es6ModuleFiles","componentFiles","file","module","moduleError","loadScript","missingComponents","comp","error","src","resolve","reject","script","showComponentDemo","link","e","section","getSectionName","demo","mainContent","originalContent","backButton","addDemoButton","initializeKeyboardShortcuts","headerActions","demoBtn","taxYear","testSalary","tipOfDay","taxTips","amount","number","date","status","stats","themeToggle","toggleContainer","toggleButton","message","savedTheme","registration","registrationError"],"mappings":"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"}